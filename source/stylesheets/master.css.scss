$url: '../images';

@font-face{
	font-family: ABeeZee-Regular;
	src: url('ABeeZee-Regular.ttf');
}

@font-face{
	font-family: ABeeZee-Italic;
	src: url('ABeeZee-Italic.ttf');
}

@media only screen and (max-width: 600px), only screen and (max-height: 400px){
	body{
		font-size: 100% !important;
	}
}

// --- ENVIRONMENT ---
*{
	-webkit-tap-highlight-color: rgba(255, 255, 255, 0);
}

body{
	width: 100%;
	height: 100%;
	overflow: hidden;
	margin: 0;
	padding: 0;
	font-family: ABeeZee-Regular, "Lucida Grande", "Trebuchet MS", Verdana, sans-serif;
	font-size: 140%;
	
	#setting{
		z-index: 0;
		background-size: 100%;
		width: 100%;
		overflow: auto;
		background-position: top center;
		background-repeat: repeat;
		position: relative;
		top: 0;
		margin: 0;
		padding: 0;
	}
	
	&.fisherman #setting{
		background-image: url(#{$url}/fisherman/background.jpg);
	}
	
	&.farmer #setting{
		background-image: url(#{$url}/farmer/background.jpg);
	}
	
	#character{
		z-index: 100;
		background-repeat: no-repeat;
		background-position: center center;
		background-size: contain;
		height: 50%;
		position: fixed;
		top: 20%;
		width: 100%;
		display: block;
	}
	
	&.fisherman #character{
		background-image: url(#{$url}/fisherman/character.png);
	}
	
	&.farmer #character{
		background-image: url(#{$url}/farmer/character-2.png);
		
		&.walk{
			-webkit-animation: walk 1s ease-in-out infinite alternate;
		}
	}
	

}

@-webkit-keyframes walk{
	0%{ background-image: url(#{$url}/farmer/character-1.png); }
	50%{ background-image: url(#{$url}/farmer/character-2.png); }
	100%{ background-image: url(#{$url}/farmer/character-3.png); }
}

.screen{
	width: 100%;
	position: relative;
	overflow: hidden;
	-webkit-transition: top 1.5s;
		
	.clock{
		$width_0: 475;
		$height_0: 174;
		$width: 40%;
		background-image: url(#{$url}/fisherman/clock.png);
		background-size: contain;
		background-repeat: no-repeat;
		background-position: bottom center;
		width: $width;
		height: $width*$height_0/$width_0;
		padding-top: 5%;
		padding-left: 7%;
		z-index: 500;
		position: absolute;
		left: 10%;
		bottom: -100%;
		-webkit-transition: bottom 1s;
		vertical-align: bottom;
		text-align: center;
		font-size: 2em;
		color: white;
		z-index: 2000;
		
		&.show{
			bottom: 0;
		}
	}
}

.tutorial{
	
	.skip_button{
		position: absolute;
		z-index: 5000;
		right: 3%;
		top: 3%;
				
	}
	
	.screen{
		display: none;
		width: 100%;
		height: 100%;
		background-repeat: no-repeat;
		background-size: cover;
		z-index: 1000;
		background-position: center center;
		position: absolute;
		top: 0%;
		left: 0%;
		
		&.character-intro{
			display:block;
		}
	}
	
	*{
		color: white;
	}
	
	.text{
		width: 30%;
		z-index: 4000;
	}
	
	.indicator{
		background-size: contain;
		background-position: top center;
		width: 100%;
		height: 100%;
		background-repeat: no-repeat;
		background-size: cover;
		z-index: 1000;
		position: absolute;
		top: 0%;
		left: 0%;
	}
	
	.character-intro{
		.indicator{
			background-image: url(#{$url}/tutorial/frame1.png);
		}
		
		.text{
			position: absolute;
			left: 10%;
			top: 10%;
		}
	}
		
	.advance-control-intro{		
		.indicator{
			background-image: url(#{$url}/tutorial/frame2_arrow.png);
			background-position: bottom right;
		}
		
		.continue_journey_button{
			position: absolute;
			bottom: 0;
			right: 0;
			width: 40%;
			height: 100%;
			background-repeat: no-repeat;
			background-size: contain;
			background-position: bottom right;
		}

		.text{
			position: absolute;
			right: 10%;
			bottom: 50%;
			text-align: right;
		}
	}
	
	.sea-intro{
		.indicator{
			background-image: url(#{$url}/tutorial/frame3.png);
			background-position: bottom center;
		}
		
		.text{
			position: absolute;
			left: 10%;
			top: 10%;
		}
	}
	
	.arrow-intro{
		.indicator{
			background-image: url(#{$url}/tutorial/frame4_rod_arrow.png);
			background-position: bottom center;
			background-size: cover;
		}
		
		&.next .indicator{
			background-image: url(#{$url}/tutorial/frame5_rod_range.png);
			background-position: bottom center;
			background-size: cover;
		}
		
		.text-next{ display: none; }
		
		&.next .text{
			display: none;
		}
		
		&.next .text-next{
			display: block;
			position: absolute;
			left: 20%;
			top: 23%;
			z-index: 2000;
		}
		
		.sea-background{
			background-image: url(#{$url}/tutorial/frame3.png);
			background-position: bottom center;
			background-size: contain;
			width: 100%;
			height: 100%;
			background-repeat: no-repeat;
			background-size: cover;
			z-index: 10;
			position: absolute;
			top: 0%;
			left: 0%;
		}
		
		.text{
			position: absolute;
			left: 20%;
			top: 40%;
		}
	}
	
	.good-luck{
		.indicator{
			background-image: url(#{$url}/tutorial/frame6.png);
			background-position: bottom center;
			background-size: cover
		}
		
		.text{
			position: absolute;
			left: 0%;
			width: 100%;
			text-align: center;
			top: 10%;
		}
	}
}

// --- UNDERWATER ---
.underwater.screen{
	background-size: cover;
	background-position: top;
	-webkit-transition: box-shadow 1s;
	
	&.future{
		box-shadow: 0 0 7em 3em white inset;		
	}
}

.fisherman .underwater.screen{
	background-image: url(#{$url}/fisherman/background_underwater.png);
}

.farmer .underwater.screen{
	background-image: url(#{$url}/farmer/background_underwater.png);
}


// --- ELEMENT DESIGN ---
.question, #consequence p{
	// cute box design
	background-color: rgba(255,255,255, .5);
	padding: .5em;
	margin: 0 auto;	
	font-size: .9em;
}



 // --- HEADER ---
.question{
	display: table;
	table-layout: fixed;
	position: relative;
	width: 30em;
	top: 5%;
}

#score{
	background-color: rgba(0, 0, 0, .5);
	color: white;
	position: absolute;
	right: 0px;
	top: 0px;
	margin: 1em 0;
	display: table;
	width: 8%;
	font-size: 1.5em;
	text-align: center;
	padding: .2em;
	z-index: 500;
	
	&:before{
		background-color: rgba(0, 0, 0, .5);
		color: white;
		
		content: 'Pontução:';
		text-transform: uppercase;
		font-size: .4em;
		padding: .2em 0;
		position: absolute;
		top: -45%;
		left: 0;
		text-align: center;
		width: 100%;
	}
}


 // --- FOOTER ---

footer{
	background-repeat: no-repeat;
	background-size: 100%;
	background-position: top left;	
	display: block;
	height: auto;
	width: 100%;
	position: absolute;
	bottom: 0;
}

.fisherman .choices{
	background-image: url(#{$url}/fisherman/choices-background.png);	
}

.farmer .choices{
	background-image: url(#{$url}/farmer/choices-background.png);	
}

.choices{
	background-repeat: no-repeat;
	background-size: cover;
	background-position: top left;
	width: 75%;
	padding-left: 25%;
	padding-top: 5%;
	padding-bottom: 5%;
	position: absolute;
	bottom: 0;
	left: 0;
	counter-reset: choice;
	
	.choice{
		display: table-cell;
		width: 2%; // used to force fixed table layout
		padding: .5em .5em 1.2em .5em;
		margin: 0 auto;
		color: white;
		position: relative;

		// visual bar below each choice
		$choice_bar_height: .3em;
		&:after{
			content: '';
			width: 90%;
			margin-left: 5%;
			position: absolute;
			bottom: 0;
			display: block;
			padding-top: 1em;			
			background: -webkit-linear-gradient(left, rgba(255,255,255,.4) 0%, rgba(255,255,255,.4) 100%);
			background-position: bottom center;
			height: $choice_bar_height;
			background-size: 100% $choice_bar_height;
			background-repeat: no-repeat;

		}
		
		// visual bar once it's selected
		&.selected{
			&:after{
				background: -webkit-linear-gradient(left, rgba(255,255,255,.8) 0%, rgba(255,255,255,.8) 100%), url(#{$url}/fisherman/selected-choice.png);
				background-position: bottom center, $choice_bar_height center;
				background-size: 100% $choice_bar_height, 100% 100%;
				background-repeat: no-repeat;
			}
		}

		.title{
			text-align: center;
			vertical-align: top;
			
			&:before{
				content: counter(choice)'.';
				counter-increment: choice;
				margin-right: .5em;
			}
		}
		
		.consequence{
			display: none;
			font-size: .8em;
		}
		
	}
}

.arrow, .trajectory{
	position: absolute;
	bottom: 10%;
	// -webkit-perspective: 1000;
	-webkit-backface-visibility: hidden;
}


 // --- CONSEQUENCE ---
#consequence{
	width: 50%;
	left: 25%;
	// top: 25%;
	position: fixed;
	// display: none;
	z-index: 500;
}

.fisherman #continue_journey_button, .fisherman .continue_journey_button{
		background-image: url(#{$url}/fisherman/continue-button.png);
}

.farmer #continue_journey_button, .farmer .continue_journey_button{
		background-image: url(#{$url}/farmer/continue-button.png);
}

#continue_journey_button{
	background-repeat: no-repeat;
	background-size: contain;
	background-position: right bottom;
	position: fixed;
	// bottom: 0;
	right: 0;
	width: 40%;
	height: 100%;
	z-index: 3000;
	cursor: pointer;
}



// --- CONTROL ---
#control{
	position: absolute;
	bottom: 0;
	width: 100%;
	height: 100%;
}

.fisherman #throw_button, .fisherman .throw_button{
	background-image: url(#{$url}/fisherman/throw-button.png);
}

.farmer #throw_button, .farmer .throw_button{
	background-image: url(#{$url}/farmer/throw-button.png);
}

#throw_button, .throw_button{
	display: block;
	background-repeat: no-repeat;
	background-size: contain;
	background-position: left bottom;
	position: fixed;
	bottom: 40%;
	left: 0;
	width: 20%;
	height: 100%;
	z-index: 500;
	cursor: pointer;
}

.fisherman .arrow{
	background-image: url(#{$url}/fisherman/control.png);
}

.farmer .arrow{
	background-image: url(#{$url}/farmer/control.png);
}

.arrow{
	background-repeat: no-repeat;
	width: 25%;
	height: 20%;
	bottom: -5%;
	background-size: contain;
	display: none;
	z-index: 400;	
}

@-webkit-keyframes swing{
/*	TODO: figure the exact angles to fit in the 25% --- 100% range*/
	0%{ -webkit-transform: rotate(-52deg); }
	100%{ -webkit-transform: rotate(-15deg); }
}

.trajectory{
	width: 100%;
	height: 100%;
	margin-bottom: 19px;
	left: 0;
	z-index: 50;
}



// --- SIMPLE ANIMATIONS VARIABLES ---
// ** Select choice
$sc_freeze: 3s; // PRODUCTION: 3s
$sc_choices_go_down: 2s;
$sc_control_goes_left: 2s;
$sc_delay: -1s;
$sc_show_response: 1s;
$sc_continue_button_delay: .5s; // PRODUCTION: 2s


// ** Continue
$c_delay: 1s;
$c_transition: 3s; // if you change this, change javascript also

$sc_underwater_start: $sc_freeze + $sc_choices_go_down + $c_transition;


// --- SIMPLE ANIMATIONS ---

// ** New screen & Select choice
.choices{
	-webkit-transition: bottom $sc_choices_go_down $sc_freeze;
	bottom: -100%;
	
	&.come{
		-webkit-transition: bottom $sc_control_goes_left ($c_delay + $c_transition);
		bottom: 0;
	}
}

#throw_button{
	-webkit-transition: left $sc_control_goes_left ($c_delay + $c_transition);
	
	&.leave{
		-webkit-transition: left $sc_control_goes_left $sc_freeze;
		left: -100%;
	}	
}

#control{
	-webkit-transition: left $sc_control_goes_left $sc_freeze;
	left: -100%;
	
	&.come{
		-webkit-transition: left $sc_control_goes_left ($c_delay + $c_transition);
		left: 0;
	}
}

.question{
	
	&.leave{
		-webkit-transition: top $sc_control_goes_left $sc_freeze;
		top: -100%;
	}
}

#consequence{
	-webkit-transition: top $sc_show_response 0;
	top: -100%;
	
	&.come{
		-webkit-transition: top $sc_show_response ($sc_freeze + $sc_choices_go_down + $sc_delay);
		top: 15%;
	}
}

#continue_journey_button{
	-webkit-transition: right $sc_show_response 0;
	right: -100%;
	
	&.come{
		right: 0;
		-webkit-transition: right $sc_show_response ($sc_freeze + $sc_choices_go_down + $sc_delay + $sc_choices_go_down + $sc_continue_button_delay);
	}
}

.arrow{
	&.swing{
		display: block;
		-webkit-transform-origin: 0 50%;		
		-webkit-animation: swing 1s;
		-webkit-transform: rotate(-20deg); // TODO: REMOVE
		-webkit-animation-iteration-count: infinite;
		-webkit-animation-timing-function: linear;
		-webkit-animation-direction: alternate;
		// -webkit-animation-delay: $c_delay + $c_transition;
		
		&.stop{
			-webkit-animation-play-state: paused;		
		}
	}
}

.pier{
	width: 100%;
	height: 50%;
	background-repeat: no-repeat;
	background-size: contain;
	z-index: 1000;
	background-position: bottom center;
	position: absolute;
	bottom: 0%;
	left: 0%;
}

.fisherman .pier{
	background-image: url(#{$url}/fisherman/pier.png);
}

.farmer .pier{
	background-image: url(#{$url}/farmer/pier.png);
}

.catch{
	width: 100%;
	height: 50%;
	background-repeat: no-repeat;
	background-size: contain;
	z-index: 1000;
	background-position: bottom center;
	position: absolute;
	bottom: 0%;
	left: 0%;
}

.fisherman .catch{
	background-image: url(#{$url}/fisherman/BOX.png);
	background-position: top center;
	
	&.good{
		background-image: url(#{$url}/fisherman/BOX_FEW.png);
		
		&.great{
			background-image: url(#{$url}/fisherman/BOX_MEDIUM.png);
			
			&.amazing{
				background-image: url(#{$url}/fisherman/BOX_LOT.png);
			}
		}
	}
}

.farmer .catch{
	background-image: url(#{$url}/farmer/BOX.png);
	background-position: top center;
	bottom: 10%;
	
	&.good{
		background-image: url(#{$url}/farmer/BOX_FEW.png);
		
		&.great{
			background-image: url(#{$url}/farmer/BOX_MEDIUM.png);
			
			&.amazing{
				background-image: url(#{$url}/farmer/BOX_LOT.png);
			}
		}
	}
}

.final_score{
	text-align: center;
	margin-top: 5%;
	font-size: 1.5em;
	color: black;
	position: relative;
	
	&:after{
		position: absolute;
		bottom: -100%;
		left: 0;
		width: 100%;
		content: 'Pontos';
		text-transform: uppercase;
	}
}

.screen:first .arrow.first{ // TODO: doesnt look like this is having an effect now
	-webkit-animation-delay: 0;
}

// ** Continue
#setting{
	-webkit-transition: top $c_transition ease-in-out $c_delay;
}

// ** Underwater
#setting.underwater{
	-webkit-transition: top $c_transition ease-in-out ($sc_freeze + $sc_choices_go_down);
}

body #character{ // had to keep all the tags for precedence (top is also applied on it before)
	-webkit-transition: top $c_transition ease-in-out 1s;

	&.underwater{
		top: -25%;
		-webkit-transition: top $c_transition ease-in-out ($sc_freeze + $sc_choices_go_down);
	}
}



// FARMER ANIMATIONS
@import "animations/farmer/1-a-leave-it";
@import "animations/farmer/2-a-let-it-grow";
@import "animations/farmer/3-a-let-pigeons-eat";
@import "animations/farmer/4-a-poison-caterpillars";
@import "animations/farmer/5-a-ashtray";
@import "animations/farmer/7-a-put-in-water";

// FISHERMAN ANIMATIONS
@import "animations/fisherman/1-a-reserva";
@import "animations/fisherman/1-b-young-fish";
@import "animations/fisherman/1-c-grown-fish";

@import "animations/fisherman/2-a-net";
@import "animations/fisherman/2-b-bomb";
@import "animations/fisherman/2-c-selective";

@import "animations/fisherman/3-a-breeding-fish";
@import "animations/fisherman/3-b-other-time";
@import "animations/fisherman/3-c-other-location";

@import "animations/fisherman/4-a-organic-water";
@import "animations/fisherman/4-b-keep-leftovers";

@import "animations/fisherman/5-a-seal-bomb";
@import "animations/fisherman/5-b-seal-fish-elsewhere";
// 5-c-continue-fishing same as 5-b

@import "animations/fisherman/6-a-fish-non-profitable";
@import "animations/fisherman/6-b-throw-non-profitable";

@import "animations/fisherman/7-a-throw-net";
@import "animations/fisherman/7-b-fix-net";
@import "animations/fisherman/7-c-net-trashcan";

@import "animations/fisherman/8-a-trash-ocean";
@import "animations/fisherman/8-b-trash-recycling";
@import "animations/fisherman/8-c-throw-batteries";


@import "animations/fisherman/0-common";

